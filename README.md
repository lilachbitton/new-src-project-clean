# בונה הצעות מחיר - גרסה נקייה עם חיבור לאיירטייבל ✨

## מה חדש! 🎉

**✅ חיבור פעיל לאיירטייבל!**
- 📦 טעינת כל המוצרים מטבלת "קטלוג מוצרים"
- 📋 טעינת מארזים פעילים בלבד מטבלת "קטלוג מארזים"
- 🔄 רענון נתונים בזמן אמת
- 🎯 סינון מוצרים לפי סוג (רגילים/מיתוג ואריזה)

## איך להתחיל מהר! 🚀

### 1. התקנה
```bash
cd C:\Users\user\Documents\GitHub\new-src-project-clean
npm install
```

### 2. הפעלה
```bash
npm run dev
```

### 3. פתיחה בדפדפן
[http://localhost:3000](http://localhost:3000)

**זהו! המערכת עובדת עם נתונים אמיתיים מאיירטייבל!**

## מה תראה במערכת 👀

### דף הבית
- ממשק נקי ומודרני
- הסבר על המערכת
- כפתור מעבר לבונה הצעות מחיר

### בונה הצעות מחיר
- **סיידבר שמאלי**: כל המוצרים והמארזים מאיירטייבל
- **חלק עליון**: פרטי לקוח עם חישובי מע"מ אוטומטיים  
- **חלק ימני**: אופציות הצעת מחיר עם drag & drop
- **כפתורי פעולה**: שמירה, שליחה, undo/redo

### תכונות פעילות ✅

#### בסיידבר:
- 📊 **מונה מוצרים ומארזים** - רואים כמה יש מכל סוג
- 🔍 **חיפוש** - לפי שם מוצר או מחיר
- 📈 **סינון** - מחיר גבוה לנמוך או להיפך
- 🔄 **רענון** - כפתור לעדכון נתונים מאיירטייבל
- 📑 **3 טאבים**:
  - מוצרים רגילים
  - מוצרי מיתוג ואריזה  
  - מארזים פעילים (רק עם צ'ק בוקס "פעיל")

#### גרירה והשלכה:
- 🎯 גרור מוצרים בודדים לאופציות
- 📦 גרור מארזים שלמים (עם כל התכולה)
- 📋 הצגת פרטי מארז עם פתיחה וסגירה

#### אופציות:
- ➕ הוספת אופציה חדשה
- 📝 עריכת כותרת אופציה
- 📑 שכפול אופציה
- 🗑️ מחיקת אופציה
- ⚠️ סימון כלא רלוונטי
- 🔄 Undo/Redo עם Ctrl+Z/Y

#### פרטי לקוח:
- 👤 שם, אימייל, טלפון
- 💰 תקציב (חישוב מע"מ אוטומטי)
- 📅 תאריך אספקה
- 📝 דגשים
- ✅ צ'ק בוקס "תקציב כולל עלות משלוח"

## מבנה הקבצים החדש 📁

```
src/
├── app/
│   ├── api/                    # API Routes חדשים!
│   │   ├── products/route.ts   # טעינת מוצרים
│   │   └── packages/route.ts   # טעינת מארזים
│   └── quote-builder/page.tsx
├── components/quote-builder/   # 6 קומפוננטות נקיות
├── hooks/                      # 4 hooks (כולל החדשים!)
│   ├── useQuoteData.ts
│   ├── useHistory.ts
│   ├── useProducts.ts          # 🆕 טעינת מוצרים
│   └── usePackages.ts          # 🆕 טעינת מארזים
├── lib/services/               # שירותים חיצוניים
│   └── airtable.ts             # 🆕 חיבור לאיירטייבל
└── types/index.ts              # הגדרות TypeScript
```

## איך זה עובד מבחינה טכנית 🔧

### 1. בעת טעינת הדף:
```typescript
// useProducts hook מבצע:
fetch('/api/products') → API Route → Airtable → מחזיר מוצרים

// usePackages hook מבצע:
fetch('/api/packages') → API Route → Airtable → מחזיר מארזים פעילים
```

### 2. הסינון באיירטייבל:
```javascript
// רק מארזים עם צ'ק בוקס "פעיל" מסומן:
.select({ filterByFormula: '{פעיל} = TRUE()' })
```

### 3. סיווג מוצרים אוטומטי:
```typescript
// מוצרי מיתוג ואריזה נקבעים לפי שדה "סוג מוצר":
const brandingTypes = ['אריזה', 'מיתוג', 'קיטלוג'];
```

## טיפים לשימוש 💡

### לטעינה מהירה:
- המערכת שומרת cache של המוצרים
- לחץ על כפתור הרענון לעדכון נתונים חדשים

### לחיפוש יעיל:
- חפש לפי שם מוצר או מחיר מדויק
- השתמש בסינון לפי מחיר

### לעבודה עם מארזים:
- גרור מארז שלם לקבלת כל התכולה
- לחץ על החץ לראות פירוט המארז
- שימו לב למארזים מקבילים

### למקלדת:
- `Ctrl+Z` - ביטול פעולה
- `Ctrl+Y` - שחזור פעולה

## מה הבא? 🚀

הבסיס מוכן! עכשיו אפשר להוסיף:

### קצר טווח:
- [ ] שמירת הצעות מחיר לאיירטייבל
- [ ] חישובים פיננסיים מתקדמים
- [ ] Drag & Drop מלא בין אופציות

### בינוני טווח:
- [ ] ייצוא PDF
- [ ] שליחה במייל
- [ ] טעינת הצעות קיימות

### ארוך טווח:
- [ ] ניהול לקוחות
- [ ] דוחות ואנליטיקה
- [ ] אישורי הזמנות

## פתרון בעיות 🛠️

### אם המוצרים לא נטענים:
1. בדוק שה-.env.local קיים עם הטוקן הנכון
2. בדוק ב-console של הדפדפן אם יש שגיאות
3. לחץ על כפתור הרענון בסיידבר

### אם המארזים לא מופיעים:
- וודא שהצ'ק בוקס "פעיל" מסומן באיירטייבל

### אם יש שגיאת API:
```bash
# ודא שהשרת רץ:
npm run dev
```

## תמיכה 🤝

- 📚 **תיעוד מלא**: `docs/` תיקייה
- 🔧 **דוגמאות קוד**: בכל קובץ
- 🐛 **דיבוג**: Console.log בכל שלב
- 📞 **עזרה**: בדוק את הקבצים עם ההערות

---

**🎉 המערכת מוכנה לשימוש עם נתונים אמיתיים מאיירטייבל!**

**התחל לגרור מוצרים ומארזים ובנה הצעות מחיר מקצועיות! 💪**